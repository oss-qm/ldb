Only in ldb-0.9.0-debian: bin
Common subdirectories: ldb-0.9.0/common and ldb-0.9.0-debian/common
Only in ldb-0.9.0-debian: config.log
Only in ldb-0.9.0-debian: config.status
Common subdirectories: ldb-0.9.0/docs and ldb-0.9.0-debian/docs
Common subdirectories: ldb-0.9.0/examples and ldb-0.9.0-debian/examples
Common subdirectories: ldb-0.9.0/external and ldb-0.9.0-debian/external
Common subdirectories: ldb-0.9.0/include and ldb-0.9.0-debian/include
Common subdirectories: ldb-0.9.0/ldb_ildap and ldb-0.9.0-debian/ldb_ildap
Common subdirectories: ldb-0.9.0/ldb_ldap and ldb-0.9.0-debian/ldb_ldap
Only in ldb-0.9.0-debian: ldb.pc
Common subdirectories: ldb-0.9.0/ldb_sqlite3 and ldb-0.9.0-debian/ldb_sqlite3
Common subdirectories: ldb-0.9.0/ldb_tdb and ldb-0.9.0-debian/ldb_tdb
Only in ldb-0.9.0-debian: lib
Only in ldb-0.9.0-debian: libldb.so.0.9.0
Common subdirectories: ldb-0.9.0/libreplace and ldb-0.9.0-debian/libreplace
Only in ldb-0.9.0-debian: Makefile
diff -u ldb-0.9.0/Makefile.in ldb-0.9.0-debian/Makefile.in
--- ldb-0.9.0/Makefile.in	2007-05-05 22:51:58.000000000 +0200
+++ ldb-0.9.0-debian/Makefile.in	2007-05-06 02:37:48.000000000 +0200
@@ -34,7 +34,7 @@
        $(POPT_CFLAGS) $(TALLOC_CFLAGS) $(TDB_CFLAGS) \
 	-DLIBDIR=\"$(libdir)\" -DSHLIBEXT=\"@SHLIBEXT@\" -DUSE_MMAP=1 @CFLAGS@
 
-LIB_FLAGS=@LDFLAGS@ -Llib -lldb @LIBS@ $(POPT_LIBS) $(TALLOC_LIBS) $(TDB_LIBS)
+LIB_FLAGS=@LDFLAGS@ $(SOLIB) @LIBS@ $(POPT_LIBS)
 
 LDB_TDB_DIR=ldb_tdb
 LDB_TDB_OBJ=$(LDB_TDB_DIR)/ldb_tdb.o \
@@ -63,7 +63,7 @@
 
 BINS = bin/ldbadd bin/ldbsearch bin/ldbdel bin/ldbmodify bin/ldbedit bin/ldbrename bin/ldbtest bin/oLschema2ldif
 
-LIBS = $(LDB_LIB)
+LIBS = $(SOLIB)
 
 EXAMPLES = examples/ldbreader examples/ldifreader
 
@@ -76,7 +76,13 @@
 nssdir:
 	@mkdir -p $(NSSDIR)
 
-all: showflags dirs $(OBJS) $(LDB_LIB) $(BINS) $(EXAMPLES) manpages
+SONAME = libldb.so.0
+SOLIB = lib/libldb.so.0.9.0
+
+$(SOLIB): $(OBJS:.o=.po)
+	$(CC) -shared -Wl,-soname,$(SONAME) -o $@ $^ @LDFLAGS@ @LIBS@ $(TALLOC_LIBS) $(TDB_LIBS)
+
+all: showflags dirs $(OBJS) $(LDB_LIB) $(SOLIB) $(BINS) $(EXAMPLES) manpages
 
 showflags:
 	@echo 'ldb will be compiled with flags:'
@@ -88,6 +94,11 @@
 	@mkdir -p `dirname $@`
 	@$(CC) $(CFLAGS) -c $< -o $@
 
+.c.po:
+	@echo Compiling $*.c
+	@mkdir -p `dirname $@`
+	@$(CC) -fPIC $(CFLAGS) -c $< -o $@
+
 dirs:
 	@mkdir -p $(DIRS)
 
@@ -128,7 +139,7 @@
 examples/ldifreader: examples/ldifreader.o $(LIBS)
 	$(CC) -o examples/ldifreader examples/ldifreader.o $(LIB_FLAGS)
 
-.SUFFIXES: .1 .1.xml .3 .3.xml .xml .html
+.SUFFIXES: .1 .1.xml .3 .3.xml .xml .html .c .o .po
 
 manpages:
 	@$(srcdir)/docs/builddocs.sh "$(XSLTPROC)" "$(srcdir)"
@@ -165,7 +176,7 @@
 install: all
 	mkdir -p $(DESTDIR)$(includedir) $(DESTDIR)$(libdir)/pkgconfig $(libdir) $(DESTDIR)$(bindir)
 	cp $(srcdir)/include/ldb.h $(srcdir)/include/ldb_errors.h $(DESTDIR)$(includedir)
-	cp $(LDB_LIB) $(DESTDIR)$(libdir)
+	cp $(LDB_LIB) $(SOLIB) $(DESTDIR)$(libdir)
 	cp $(BINS) $(DESTDIR)$(bindir)
 	cp ldb.pc $(DESTDIR)$(libdir)/pkgconfig
 	$(srcdir)/docs/installdocs.sh $(DESTDIR)$(mandir)
Common subdirectories: ldb-0.9.0/man and ldb-0.9.0-debian/man
Common subdirectories: ldb-0.9.0/modules and ldb-0.9.0-debian/modules
Common subdirectories: ldb-0.9.0/nssldb and ldb-0.9.0-debian/nssldb
Only in ldb-0.9.0-debian: replace.o
Only in ldb-0.9.0-debian: replace.po
Common subdirectories: ldb-0.9.0/samba and ldb-0.9.0-debian/samba
Only in ldb-0.9.0-debian: snprintf.o
Only in ldb-0.9.0-debian: snprintf.po
Common subdirectories: ldb-0.9.0/swig and ldb-0.9.0-debian/swig
Common subdirectories: ldb-0.9.0/tests and ldb-0.9.0-debian/tests
Common subdirectories: ldb-0.9.0/tools and ldb-0.9.0-debian/tools
Common subdirectories: ldb-0.9.0/web and ldb-0.9.0-debian/web
